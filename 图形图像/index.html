<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        canvas{
            background:#ccc;
        }
    </style>
    <script>
        window.onload=function(){
            var canvas=document.querySelector("canvas");
            var cobjs=canvas.getContext("2d");
            var img=document.querySelector("img");
            cobjs.drawImage(img,10,10,300,300);
            var width=300;
            var height=300;
            var num=10;
            var w=width/num;
            var h=height/num;
            for(var i=0;i<num;i++){
                for(var j=0;j<num;j++){
                    var dataObj=cobjs.getImageData(w*j,h*i,w,h);
                    var r= 0,g=0,b=0;
                    for(var k=0;k<dataObj.width*dataObj.height;k++){
                        r+=dataObj.data[k*4];
                        g+=dataObj.data[k*4+1];
                        b+=dataObj.data[k*4+2]
                    }
                    r=parseInt(r/(dataObj.width*dataObj.height));
                    g=parseInt(g/(dataObj.width*dataObj.height));
                    b=parseInt(b/(dataObj.width*dataObj.height));
                    for(var k=0;k<dataObj.width*dataObj.height;k++){
                        dataObj.data[k*4]=r;
                        dataObj.data[k*4+1]=g;
                        dataObj.data[k*4+2]=b;
                    }
                    cobjs.putImageData(dataObj,300+w*j,i*h);
                }
            }
        }
    </script>
</head>
<body>
<canvas width="1000" height="600"></canvas>
<img src="huahua.jpg" alt="" hidden>
</body>
</html>